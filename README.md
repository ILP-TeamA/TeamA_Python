# TeamA_Python

# ğŸº ãƒ“ãƒ¼ãƒ«å£²ä¸Šäºˆæ¸¬ã‚·ã‚¹ãƒ†ãƒ 

<div align="center">

![GitHub repo size](https://img.shields.io/github/repo-size/username/beer-prediction-system)
![GitHub last commit](https://img.shields.io/github/last-commit/username/beer-prediction-system)
![Python version](https://img.shields.io/badge/python-3.8+-blue.svg)
![Azure Functions](https://img.shields.io/badge/Azure-Functions-blue.svg)

**AIã‚’æ´»ç”¨ã—ãŸãƒ“ãƒ¼ãƒ«ã®å£²ä¸Šäºˆæ¸¬ãƒ»ç™ºæ³¨æœ€é©åŒ–ã‚·ã‚¹ãƒ†ãƒ **

</div>

---

## ğŸ“‹ ç›®æ¬¡

- [æ¦‚è¦](#-æ¦‚è¦)
- [ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ](#-ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ)
- [ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ](#-ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ)
- [ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](#-ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—)
- [ä½¿ç”¨æ–¹æ³•](#-ä½¿ç”¨æ–¹æ³•)
- [APIä»•æ§˜](#-apiä»•æ§˜)
- [äºˆæ¸¬çµæœä¾‹](#-äºˆæ¸¬çµæœä¾‹)
- [æŠ€è¡“ä»•æ§˜](#-æŠ€è¡“ä»•æ§˜)
- [æ€§èƒ½æŒ‡æ¨™](#-æ€§èƒ½æŒ‡æ¨™)

---

## ğŸ¯ æ¦‚è¦

ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã¯ã€**2024å¹´4æœˆ1æ—¥ï½2025å¹´3æœˆ31æ—¥**ã®1å¹´é–“ã®å£²ä¸Šå®Ÿç¸¾ã¨æ°—è±¡ãƒ‡ãƒ¼ã‚¿ã‚’æ´»ç”¨ã—ãŸæ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚Šã€ãƒ“ãƒ¼ãƒ«ã®æ—¥æ¬¡å£²ä¸Šé‡ã‚’äºˆæ¸¬ã—ã€æœ€é©ãªç™ºæ³¨é‡ã‚’ææ¡ˆã™ã‚‹AIã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚


## ğŸ“ ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

```
beer-prediction-system/
â”œâ”€â”€ ğŸ“ model_training/              # ãƒ¢ãƒ‡ãƒ«è¨“ç·´é–¢é€£
â”‚   â”œâ”€â”€ ğŸ model_train.py          # ãƒ¡ã‚¤ãƒ³è¨“ç·´ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â””â”€â”€ ğŸ“ data/                   # è¨“ç·´ãƒ‡ãƒ¼ã‚¿
â”‚       â”œâ”€â”€ ğŸ“Š sales.csv           # å£²ä¸Šå®Ÿç¸¾ãƒ‡ãƒ¼ã‚¿ï¼ˆ2024/4/1ï½2025/3/31ï¼‰
â”‚       â””â”€â”€ ğŸŒ¤ï¸ weather.csv         # æ°—è±¡ãƒ‡ãƒ¼ã‚¿ï¼ˆåŒæœŸé–“ï¼‰
â”œâ”€â”€ ğŸ“ trained_models_hyperopt/     # è¨“ç·´æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ä¿å­˜å…ˆ
â”‚   â”œâ”€â”€ ğŸ“‹ metadata.pkl            # ãƒ¢ãƒ‡ãƒ«ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ âš–ï¸ scalers.pkl             # ãƒ‡ãƒ¼ã‚¿æ­£è¦åŒ–å™¨
â”‚   â””â”€â”€ ğŸ¤– {beer_name}_model.pkl   # å„ãƒ“ãƒ¼ãƒ«ç¨®é¡ã®ãƒ¢ãƒ‡ãƒ«
â”œâ”€â”€ âš™ï¸ function_app.py             # äºˆæ¸¬APIï¼ˆAzure Functionsï¼‰
â”œâ”€â”€ ğŸ“‹ requirements.txt            # ä¾å­˜é–¢ä¿‚
â””â”€â”€ ğŸ“– README.md                   # æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
```

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ

### ğŸ“ˆ å£²ä¸Šãƒ‡ãƒ¼ã‚¿ (`sales.csv`)

<details>
<summary>ğŸ“‹ ãƒ‡ãƒ¼ã‚¿å½¢å¼è©³ç´°</summary>

```csv
æ—¥ä»˜,æ›œæ—¥,æ¥å®¢æ•°,ãƒšãƒ¼ãƒ«ã‚¨ãƒ¼ãƒ«(æœ¬),ãƒ©ã‚¬ãƒ¼(æœ¬),IPA(æœ¬),ãƒ›ãƒ¯ã‚¤ãƒˆãƒ“ãƒ¼ãƒ«(æœ¬),é»’ãƒ“ãƒ¼ãƒ«(æœ¬),ãƒ•ãƒ«ãƒ¼ãƒ„ãƒ“ãƒ¼ãƒ«(æœ¬)
2024-04-01,æœˆ,25,8,7,5,4,2,1
2024-04-02,ç«,30,12,9,7,5,3,2
2024-04-03,æ°´,28,10,8,6,4,2,1
...
```

**å«ã¾ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿:**
- ğŸ“… æ—¥ä»˜ãƒ»æ›œæ—¥æƒ…å ±
- ğŸ‘¥ æ¥å®¢æ•°ãƒ‡ãƒ¼ã‚¿  
- ğŸº å„ãƒ“ãƒ¼ãƒ«ç¨®é¡åˆ¥å£²ä¸Šæ•°é‡
- ğŸ’° å£²ä¸Šé‡‘é¡ãƒ‡ãƒ¼ã‚¿

</details>

### ğŸŒ¦ï¸ æ°—è±¡ãƒ‡ãƒ¼ã‚¿ (`weather.csv`)

<details>
<summary>ğŸ“‹ ãƒ‡ãƒ¼ã‚¿å½¢å¼è©³ç´°</summary>

```csv
æ—¥ä»˜,å¹³å‡æ°—æ¸©(â„ƒ),æœ€é«˜æ°—æ¸©(â„ƒ),æœ€ä½æ°—æ¸©(â„ƒ),é™æ°´é‡(mm),æ—¥ç…§æ™‚é–“(æ™‚é–“),æ¹¿åº¦(%)
2024-04-01,18.5,23.2,14.1,0.0,8.5,65
2024-04-02,19.1,24.8,15.2,2.3,6.2,72
2024-04-03,17.8,22.5,13.9,5.1,4.8,78
...
```

**å«ã¾ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿:**
- ğŸŒ¡ï¸ æ°—æ¸©æƒ…å ±ï¼ˆå¹³å‡ãƒ»æœ€é«˜ãƒ»æœ€ä½ï¼‰
- ğŸŒ§ï¸ é™æ°´é‡ãƒ‡ãƒ¼ã‚¿
- â˜€ï¸ æ—¥ç…§æ™‚é–“
- ğŸ’§ æ¹¿åº¦æƒ…å ±

</details>

### ğŸº å¯¾è±¡ãƒ“ãƒ¼ãƒ«ç¨®é¡

| ãƒ“ãƒ¼ãƒ«ç¨®é¡ | è‹±èªå |
|------------|---------|
| ğŸº ãƒšãƒ¼ãƒ«ã‚¨ãƒ¼ãƒ« | Pale Ale |
| ğŸ» ãƒ©ã‚¬ãƒ¼ | Lager |
| ğŸº IPA | India Pale Ale |
| ğŸº ãƒ›ãƒ¯ã‚¤ãƒˆãƒ“ãƒ¼ãƒ« | White Beer |
| ğŸ–¤ é»’ãƒ“ãƒ¼ãƒ« | Dark Beer |
| ğŸ“ ãƒ•ãƒ«ãƒ¼ãƒ„ãƒ“ãƒ¼ãƒ« | Fruit Beer |

---

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone https://github.com/your-username/beer-prediction-system.git
cd beer-prediction-system
```

### 2. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pip install -r requirements.txt
```

### 3. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

```bash
# OpenWeather API ã‚­ãƒ¼ã®è¨­å®š
export OPENWEATHER_API_KEY="your_api_key_here"

# Azure Databaseæ¥ç¶šæƒ…å ±ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
export AZURE_DB_HOST="your_host"
export AZURE_DB_PASSWORD="your_password"
```

---

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### ã‚¹ãƒ†ãƒƒãƒ— 1: ãƒ¢ãƒ‡ãƒ«è¨“ç·´

```bash
cd model_training
python model_train.py
```

**å®Ÿè¡Œçµæœ:**
- âœ… è¨“ç·´æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ãŒ `trained_models_hyperopt/` ã«ä¿å­˜
- âœ… å„ãƒ“ãƒ¼ãƒ«ç¨®é¡ã«æœ€é©åŒ–ã•ã‚ŒãŸãƒ¢ãƒ‡ãƒ«ç”Ÿæˆ
- âœ… ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©åŒ–å®Œäº†

### ã‚¹ãƒ†ãƒƒãƒ— 2: äºˆæ¸¬APIã®èµ·å‹•

#### Azure Functionsç’°å¢ƒ

```bash
func start
```

#### ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œ

```bash
python function_app.py
```

### ã‚¹ãƒ†ãƒƒãƒ— 3: äºˆæ¸¬ã®å®Ÿè¡Œ

#### cURLã§ã®APIå‘¼ã³å‡ºã—

```bash
curl -X POST "https://your-function-url/api/predictor" \
  -H "Content-Type: application/json" \
  -d '{"target_date": "2025-04-15"}'
```

#### Pythonã§ã®å‘¼ã³å‡ºã—ä¾‹

```python
import requests
import json

url = "https://your-function-url/api/predictor"
data = {"target_date": "2025-04-15"}

response = requests.post(url, json=data)
result = response.json()

print(f"ç™ºæ³¨æ¨å¥¨é‡: {result['beer_purchase_recommendations']}")
```

---

## ğŸ“¡ APIä»•æ§˜

### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

```
POST https://your-function-url/api/predictor
```

### ãƒªã‚¯ã‚¨ã‚¹ãƒˆå½¢å¼

```json
{
  "target_date": "2025-04-15"
}
```

### ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼

#### ğŸŸ¢ é€±ä¸€ï¼ˆæœˆæ›œæ—¥ï¼‰ã®å ´åˆ

```json
{
  "type": "monday_order_recommendations",
  "base_date": "2025-04-15",
  "order_period": "å‘¨äºŒè‡³å‘¨å›› (3å¤©)",
  "beer_purchase_recommendations": {
    "ãƒšãƒ¼ãƒ«ã‚¨ãƒ¼ãƒ«": 32.4,
    "ãƒ©ã‚¬ãƒ¼": 27.8,
    "IPA": 18.2,
    "ãƒ›ãƒ¯ã‚¤ãƒˆãƒ“ãƒ¼ãƒ«": 13.6,
    "é»’ãƒ“ãƒ¼ãƒ«": 7.5,
    "ãƒ•ãƒ«ãƒ¼ãƒ„ãƒ“ãƒ¼ãƒ«": 5.8
  },
  "total_order_amount": 105.3,
  "daily_predictions": {
    "2025-04-16": { "date": "2025-04-16", "day_of_week": "å‘¨äºŒ", ... },
    "2025-04-17": { "date": "2025-04-17", "day_of_week": "å‘¨ä¸‰", ... },
    "2025-04-18": { "date": "2025-04-18", "day_of_week": "å‘¨å››", ... }
  }
}
```

#### ğŸŸ¡ æœ¨æ›œæ—¥ã®å ´åˆ

```json
{
  "type": "thursday_order_recommendations",
  "base_date": "2025-04-18",
  "order_period": "å‘¨äº”è‡³å‘¨å…­åŠä¸‹å‘¨ä¸€ (3å¤©)",
  "beer_purchase_recommendations": {
    "ãƒšãƒ¼ãƒ«ã‚¨ãƒ¼ãƒ«": 35.7,
    "ãƒ©ã‚¬ãƒ¼": 30.2,
    // ... å…¶ä»–ãƒ“ãƒ¼ãƒ«
  },
  "total_order_amount": 114.9
}
```

#### ğŸ”´ ã‚µãƒ¼ãƒ“ã‚¹åˆ©ç”¨ä¸å¯ã®å ´åˆ

```json
{
  "message": "è©²æœå‹™åƒ…åœ¨å‘¨ä¸€èˆ‡å‘¨å››ä½¿ç”¨",
  "target_date": "2025-04-16",
  "day_of_week": "å‘¨äºŒ",
  "status": "service_unavailable",
  "available_days": ["å‘¨ä¸€", "å‘¨å››"],
  "beer_purchase_recommendations": {}
}
```

---

## ğŸ“Š äºˆæ¸¬çµæœä¾‹

### ğŸ’¼ å®Ÿéš›ã®äºˆæ¸¬ã‚·ãƒŠãƒªã‚ª

#### ã‚·ãƒŠãƒªã‚ª 1: æ˜¥ã®å¹³æ—¥ï¼ˆ4æœˆ15æ—¥ æœˆæ›œæ—¥ï¼‰

**æ¡ä»¶:**
- ğŸŒ¡ï¸ æ°—æ¸©: 22Â°C (å¿«é©)
- â˜€ï¸ å¤©å€™: æ™´ã‚Œ
- ğŸ‘¥ äºˆæƒ³æ¥å®¢æ•°: 28äºº

**äºˆæ¸¬çµæœ:**

| ãƒ“ãƒ¼ãƒ«ç¨®é¡ | äºˆæ¸¬è²©å£²æ•° | ç™ºæ³¨æ¨å¥¨æ•° |
|------------|------------|------------|
| ãƒšãƒ¼ãƒ«ã‚¨ãƒ¼ãƒ« | 27æœ¬ | **32æœ¬** |
| ãƒ©ã‚¬ãƒ¼ | 23æœ¬ | **28æœ¬** |
| IPA | 15æœ¬ | **18æœ¬** |
| ãƒ›ãƒ¯ã‚¤ãƒˆ | 11æœ¬ | **14æœ¬** |
| é»’ãƒ“ãƒ¼ãƒ« | 6æœ¬ | **8æœ¬** |
| ãƒ•ãƒ«ãƒ¼ãƒ„ | 5æœ¬ | **6æœ¬** |

**ğŸ“¦ åˆè¨ˆç™ºæ³¨æ¨å¥¨: 106æœ¬** ï¼ˆ3æ—¥åˆ†ï¼‰

---

## âš™ï¸ æŠ€è¡“ä»•æ§˜

### ğŸ é–‹ç™ºç’°å¢ƒ

| é …ç›® | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ |
|------|------------|
| Python | 3.8+ |
| Azure Functions | Core Tools 4.x |
| scikit-learn | 1.3+ |
| pandas | 1.5+ |
| numpy | 1.24+ |

### ğŸ§  æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«

- **ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ **: RandomForest / ExtraTrees / GradientBoostingï¼ˆãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©åŒ–æ¸ˆã¿ï¼‰
- **ç‰¹å¾´é‡**: 62ç¨®é¡ï¼ˆæ™‚ç³»åˆ—ãƒ»æ°—è±¡ãƒ»é¡§å®¢æ•°ãƒ»äº¤äº’ä½œç”¨é …ï¼‰
- **è¨“ç·´æœŸé–“**: 2024/4/1ï½2025/3/31ï¼ˆ365æ—¥é–“ï¼‰
- **æ¤œè¨¼æ–¹æ³•**: ã‚¯ãƒ­ã‚¹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

### â˜ï¸ ã‚¤ãƒ³ãƒ•ãƒ©

- **Azure Functions**: ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹å®Ÿè¡Œç’°å¢ƒ
- **Azure Database**: PostgreSQL ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
- **OpenWeather API**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ°—è±¡ãƒ‡ãƒ¼ã‚¿
- **GitHub Actions**: CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ¨™

### ğŸ¯ äºˆæ¸¬ç²¾åº¦

| æŒ‡æ¨™ | å€¤ |
|------|----|
| **å¹³å‡RÂ²ã‚¹ã‚³ã‚¢** | 0.669 |

---

